<!-- Main Navbar -->
<nav class="navbar navbar-expand-lg fixed-top">
  <div class="container-fluid px-4">
    <!-- Brand -->
    <a class="navbar-brand" routerLink="/"> </a>

    <!-- Mobile Menu Toggle -->
    <button class="navbar-toggler" type="button" (click)="toggleSidebar()">
      <mat-icon>{{ isSidebarOpen ? "close" : "menu" }}</mat-icon>
    </button>

    <!-- Desktop Menu -->
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item">
          <a class="nav-link" routerLink="/home" routerLinkActive="active">
            <mat-icon>home</mat-icon>
            <span>Home</span>
          </a>
        </li>
        <li class="nav-item" *ngIf="isUserLoggedIn">
          <a class="nav-link" routerLink="/user-dashboard" routerLinkActive="active">
            <mat-icon>dashboard</mat-icon>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="nav-item" *ngIf="isAdminLoggedIn">
          <a
            class="nav-link"
            routerLink="/leaderboard"
            routerLinkActive="active"
          >
            <mat-icon>leaderboard</mat-icon>
            <span>Leaderboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/" routerLinkActive="">
            <mat-icon>info</mat-icon>
            <span>About Us</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/" routerLinkActive="">
            <mat-icon>call</mat-icon>
            <span>Contact Us</span>
          </a>
        </li>
        <li class="nav-item" *ngIf="!(isAdminLoggedIn || isUserLoggedIn)">
          <a class="nav-link login-btn" routerLink="/login">
            <mat-icon>login</mat-icon>
            <span>Login</span>
          </a>
        </li>
        <li class="nav-item" *ngIf="!(isAdminLoggedIn || isUserLoggedIn)">
          <a class="nav-link register-btn" routerLink="/register">
            <mat-icon>person_add</mat-icon>
            <span>Register</span>
          </a>
        </li>
        <li class="nav-item" *ngIf="(isAdminLoggedIn || isUserLoggedIn)">
          <a
            class="nav-link"
            role="button"
            (click)="toggleSidebar()"
          >
            <img
              [src]="userAvatar || 'assets/default-avatar.png'"
              alt="Profile"
              class="profile-pic"
            />
            <span class="ms-2">{{ userName }}</span>
          </a>
        </li>
        <!-- } -->
      </ul>
    </div>
  </div>
</nav>

<!-- Mobile Sidebar -->
<div
  class="sidebar-overlay"
  [class.show]="isSidebarOpen"
  (click)="toggleSidebar()"
></div>

<div class="sidebar" [class.show]="isSidebarOpen">
  <div class="sidebar-header">
    <img src="images/profile.png" alt="Profile" class="sidebar-profile-pic" />
    @if (isAdminLoggedIn || isUserLoggedIn) {
    <h5>{{ userName }}</h5>
    <p class="text-muted">{{ userEmail }}</p>
    <a 
      class="btn btn-primary"
      routerLink="update-user"
      (click)="toggleSidebar()"
    >
      Update Profile
    </a>
    } @else {
    <h5>Welcome!</h5>
    <p class="text-muted">Please login to continue</p>
    }
  </div>

  <div class="sidebar-content">
    <a 
      routerLink="/" 
      class="sidebar-item" 
      (click)="toggleSidebar()"
    >
      <mat-icon>home</mat-icon>
      <span>Home</span>
    </a>
    <a
      *ngIf="isUserLoggedIn"
      routerLink="/dashboard"
      class="sidebar-item"
      (click)="toggleSidebar()"
    >
      <mat-icon>dashboard</mat-icon>
      <span>Dashboard</span>
    </a>
    <a
      *ngIf="isAdminLoggedIn"
      routerLink="/leaderboard"
      class="sidebar-item"
      (click)="toggleSidebar()"
    >
      <mat-icon>leaderboard</mat-icon>
      <span>Leaderboard</span>
    </a>
    <a 
      routerLink="/" 
      class="sidebar-item" 
      (click)="toggleSidebar()"
    >
      <mat-icon>info</mat-icon>
      <span>About Us</span>
    </a>
    <a 
      routerLink="/" 
      class="sidebar-item" 
      (click)="toggleSidebar()">
      <mat-icon>call</mat-icon>
      <span>Contact Us</span>
    </a>
    <a
      *ngIf="isAdminLoggedIn"
      routerLink="/userDashboard"
      class="sidebar-item"
      (click)="toggleSidebar()"
    >
      <mat-icon>quiz</mat-icon>
      <span>My Quizzes</span>
    </a>
    <a
      *ngIf="isAdminLoggedIn || isUserLoggedIn"
      (click)="logout()"
      class="sidebar-item"
    >
      <mat-icon>logout</mat-icon>
      <span>Logout</span>
    </a>
    <div class="sidebar-divider"></div>
    <a
      *ngIf="!(isAdminLoggedIn || isUserLoggedIn)"
      routerLink="/login"
      class="sidebar-item"
      (click)="toggleSidebar()"
    >
      <mat-icon>login</mat-icon>
      <span>Login</span>
    </a>
    <a
      *ngIf="!(isAdminLoggedIn || isUserLoggedIn)"
      routerLink="/register"
      class="sidebar-item"
      (click)="toggleSidebar()"
    >
      <mat-icon>person_add</mat-icon>
      <span>Register</span>
    </a>
  </div>
</div>
